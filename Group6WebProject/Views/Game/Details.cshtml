@model Group6WebProject.Models.GameDetailsViewModel

@{
ViewData["Title"] = Model.Game.Title;
}

<h2>@Model.Game.Title</h2>

<p>@Model.Game.Description</p>
<p>Genre: @Model.Game.Genre</p>
<p>Platform: @Model.Game.Platform</p>
<p>Release Date: @Model.Game.ReleaseDate.ToShortDateString()</p>
<p>Price: @Model.Game.Price</p>

<!-- Display average rating -->
<p>Average Rating: @Model.AverageRating.ToString("0.0") / 5</p>

<!-- Existing code for ratings, reviews, etc. -->

<!-- Display download or purchase options -->
@if (User.Identity.IsAuthenticated)
{
if (Model.IsFree || Model.HasPurchased)
{
<a asp-action="Download" asp-route-id="@Model.Game.Id" class="btn btn-primary">Download Game</a>
}
else
{
<p>You need to purchase this game to download it.</p>
<!-- Add a button to purchase the game or add it to the cart -->
<form asp-action="AddToCart" asp-controller="Cart" method="post">
    @Html.AntiForgeryToken()
    <input type="hidden" name="gameId" value="@Model.Game.Id" />
    <button type="submit" class="btn btn-success">Add to Cart</button>
</form>
}
}
else
{
<p>Please <a asp-controller="User" asp-action="Login">log in</a> to download or purchase this game.</p>
}

<!-- Display any success or error messages -->
@if (TempData["SuccessMessage"] != null)
{
<div class="alert alert-success">
    @TempData["SuccessMessage"]
</div>
}
@if (TempData["ErrorMessage"] != null)
{
<div class="alert alert-danger">
    @TempData["ErrorMessage"]
</div>
}

<!-- Display game recommendations -->
<h3>Recommended Games</h3>
<ul>
    @foreach (var recommendedGame in Model.GameRecommendations)
    {
    <li>
        <a asp-action="Details" asp-route-id="@recommendedGame.Id">@recommendedGame.Title</a>
    </li>
    }
</ul>
